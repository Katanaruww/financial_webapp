<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á—ë—Ç</title>
  <script>
    let user_id = 1;

    async function clearAllData() {
      const confirmed = confirm("–¢—ã —Ç–æ—á–Ω–æ —Ö–æ—á–µ—à—å —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏?");
      if (!confirmed) return;
      const res = await fetch(`https://financial-webapp-bot.onrender.com/api/clear`, {
        method: "POST"
      });
      const result = await res.json();
      alert(result.message);
      loadLatest();
    }

    async function loadLatest() {
      const res = await fetch(`https://financial-webapp-bot.onrender.com/api/report`);
      const data = await res.json();
      const latest = document.getElementById("latest-expenses");
      latest.innerHTML = "";
      data.latest_expenses.forEach(([title, amount]) => {
        const div = document.createElement("div");
        div.className = "text-sm text-gray-700";
        div.textContent = `${title} ‚Äî ${amount}‚ÇΩ`;
        latest.appendChild(div);
      });
    }

    window.onload = loadLatest;
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
  <div class="max-w-md mx-auto bg-white shadow-xl rounded-xl p-6" id="main-menu">
    <h1 class="text-2xl font-bold text-center mb-4">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á—ë—Ç</h1>

    <!-- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: –¥–æ–±–∞–≤–∏—Ç—å + –º—É—Å–æ—Ä–∫–∞ -->
    <div class="flex items-center gap-2 mb-2">
      <button onclick="showAdd()" class="flex-grow bg-blue-500 text-white py-2 rounded">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
      <button onclick="clearAllData()" class="bg-red-500 text-white px-3 py-2 rounded">üóë</button>
    </div>

    <!-- –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞: –ø—Ä–æ—Å–º–æ—Ç—Ä -->
    <button onclick="showView()" class="bg-green-500 text-white w-full py-2 rounded mb-2">üìã –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–∏—Å–∏</button>

    <!-- –¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <button onclick="showStats()" class="bg-gray-400 text-white w-full py-2 rounded mb-4">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>

    <div class="bg-gray-100 rounded p-2">
      <p class="text-sm font-semibold mb-1">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞—Ç—ã:</p>
      <div id="latest-expenses" class="space-y-1"></div>
    </div>
  </div>
</body>
</html>
